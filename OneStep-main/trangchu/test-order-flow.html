<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Order Flow - C·∫≠p nh·∫≠t gi√° ti·ªÅn</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-title {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        .test-step {
            margin: 15px 0;
            padding: 10px;
            background: #f8f9fa;
            border-left: 4px solid #007bff;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .info {
            color: #17a2b8;
        }
        .code-block {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
            border: 1px solid #e9ecef;
        }
        .button {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>üß™ Test Order Flow - C·∫≠p nh·∫≠t gi√° ti·ªÅn theo h√≥a ƒë∆°n thanh to√°n</h1>
    
    <div class="test-section">
        <h2 class="test-title">üìã T√≥m t·∫Øt c√°c thay ƒë·ªïi ƒë√£ th·ª±c hi·ªán</h2>
        
        <div class="test-step">
            <h3>‚úÖ 1. C·∫≠p nh·∫≠t OrderComplete.vue</h3>
            <p>‚Ä¢ Thay th·∫ø gi√° ti·ªÅn hardcode (2,500,000 VND) b·∫±ng logic ƒë·ªông</p>
            <p>‚Ä¢ Th√™m mapGetters cho payment, cart, v√† order stores</p>
            <p>‚Ä¢ ∆Øu ti√™n s·ª≠ d·ª•ng th√¥ng tin t·ª´ order store tr∆∞·ªõc</p>
            <p>‚Ä¢ Fallback v·ªÅ payment store ho·∫∑c cart total n·∫øu c·∫ßn</p>
        </div>
        
        <div class="test-step">
            <h3>‚úÖ 2. T·∫°o Order Store Module</h3>
            <p>‚Ä¢ T·∫°o src/store/modules/order.js</p>
            <p>‚Ä¢ Qu·∫£n l√Ω th√¥ng tin ƒë∆°n h√†ng hi·ªán t·∫°i v√† l·ªãch s·ª≠</p>
            <p>‚Ä¢ Actions: setCurrentOrder, clearCurrentOrder, completeOrder</p>
            <p>‚Ä¢ Getters: currentOrder, orderHistory, recentOrders</p>
        </div>
        
        <div class="test-step">
            <h3>‚úÖ 3. C·∫≠p nh·∫≠t Store Index</h3>
            <p>‚Ä¢ Th√™m order module v√†o src/store/index.js</p>
            <p>‚Ä¢ Import v√† ƒëƒÉng k√Ω order store</p>
        </div>
        
        <div class="test-step">
            <h3>‚úÖ 4. C·∫≠p nh·∫≠t Checkout.vue</h3>
            <p>‚Ä¢ Th√™m mapActions cho order store</p>
            <p>‚Ä¢ T·∫°o ph∆∞∆°ng th·ª©c saveOrderInfo() ƒë·ªÉ l∆∞u th√¥ng tin ƒë∆°n h√†ng</p>
            <p>‚Ä¢ G·ªçi saveOrderInfo() tr∆∞·ªõc khi chuy·ªÉn sang OrderComplete</p>
            <p>‚Ä¢ L∆∞u ƒë·∫ßy ƒë·ªß th√¥ng tin: t·ªïng ti·ªÅn, ph√≠ ship, ph∆∞∆°ng th·ª©c thanh to√°n</p>
        </div>
    </div>
    
    <div class="test-section">
        <h2 class="test-title">üîÑ Lu·ªìng ho·∫°t ƒë·ªông m·ªõi</h2>
        
        <div class="test-step">
            <h3>1. Trong Checkout.vue</h3>
            <div class="code-block">
// Khi thanh to√°n th√†nh c√¥ng:
this.saveOrderInfo() // L∆∞u th√¥ng tin ƒë∆°n h√†ng v√†o store
this.clearCart()     // X√≥a gi·ªè h√†ng
this.$router.push('/order-complete') // Chuy·ªÉn trang
            </div>
        </div>
        
        <div class="test-step">
            <h3>2. Trong OrderComplete.vue</h3>
            <div class="code-block">
// ∆Øu ti√™n s·ª≠ d·ª•ng th√¥ng tin t·ª´ order store:
if (this.currentOrder && this.currentOrder.orderNumber) {
  this.orderTotal = this.currentOrder.finalTotal
  this.paymentMethod = this.currentOrder.paymentMethod
  // S·ª≠ d·ª•ng th√¥ng tin ƒë√£ l∆∞u
}
            </div>
        </div>
        
        <div class="test-step">
            <h3>3. Fallback Logic</h3>
            <div class="code-block">
// N·∫øu kh√¥ng c√≥ order store, fallback v·ªÅ:
1. Payment store (currentPayment.tongTien)
2. Cart total + shipping fee
3. Gi√° tr·ªã m·∫∑c ƒë·ªãnh (0)
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2 class="test-title">üß™ C√°ch test</h2>
        
        <div class="test-step">
            <h3>B∆∞·ªõc 1: Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng</h3>
            <p>‚Ä¢ V√†o trang s·∫£n ph·∫©m</p>
            <p>‚Ä¢ Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng</p>
            <p>‚Ä¢ Ki·ªÉm tra t·ªïng ti·ªÅn trong gi·ªè h√†ng</p>
        </div>
        
        <div class="test-step">
            <h3>B∆∞·ªõc 2: Thanh to√°n</h3>
            <p>‚Ä¢ V√†o trang checkout</p>
            <p>‚Ä¢ ƒêi·ªÅn th√¥ng tin kh√°ch h√†ng</p>
            <p>‚Ä¢ Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n</p>
            <p>‚Ä¢ Ho√†n t·∫•t thanh to√°n</p>
        </div>
        
        <div class="test-step">
            <h3>B∆∞·ªõc 3: Ki·ªÉm tra OrderComplete</h3>
            <p>‚Ä¢ Ki·ªÉm tra t·ªïng ti·ªÅn hi·ªÉn th·ªã c√≥ ƒë√∫ng kh√¥ng</p>
            <p>‚Ä¢ Ki·ªÉm tra ph∆∞∆°ng th·ª©c thanh to√°n</p>
            <p>‚Ä¢ Ki·ªÉm tra m√£ ƒë∆°n h√†ng</p>
            <p>‚Ä¢ M·ªü Developer Tools ƒë·ªÉ xem console logs</p>
        </div>
        
        <div class="test-step">
            <h3>B∆∞·ªõc 4: Ki·ªÉm tra Console Logs</h3>
            <div class="code-block">
// Trong Checkout.vue:
üíæ L∆∞u th√¥ng tin ƒë∆°n h√†ng: {orderData}

// Trong OrderComplete.vue:
‚úÖ S·ª≠ d·ª•ng th√¥ng tin t·ª´ order store: {currentOrder}
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2 class="test-title">üéØ K·∫øt qu·∫£ mong ƒë·ª£i</h2>
        
        <div class="test-step">
            <h3 class="success">‚úÖ Th√†nh c√¥ng</h3>
            <p>‚Ä¢ T·ªïng ti·ªÅn trong OrderComplete kh·ªõp v·ªõi t·ªïng ti·ªÅn trong Checkout</p>
            <p>‚Ä¢ Ph∆∞∆°ng th·ª©c thanh to√°n hi·ªÉn th·ªã ƒë√∫ng</p>
            <p>‚Ä¢ Console logs hi·ªÉn th·ªã th√¥ng tin ƒë√∫ng</p>
            <p>‚Ä¢ Kh√¥ng c√≤n gi√° ti·ªÅn hardcode 2,500,000 VND</p>
        </div>
        
        <div class="test-step">
            <h3 class="error">‚ùå N·∫øu c√≥ l·ªói</h3>
            <p>‚Ä¢ Ki·ªÉm tra console ƒë·ªÉ xem l·ªói</p>
            <p>‚Ä¢ Ki·ªÉm tra Vuex DevTools ƒë·ªÉ xem state</p>
            <p>‚Ä¢ Ki·ªÉm tra network requests</p>
        </div>
    </div>
    
    <div class="test-section">
        <h2 class="test-title">üîß Debug Tips</h2>
        
        <div class="test-step">
            <h3>Vuex DevTools</h3>
            <p>‚Ä¢ C√†i ƒë·∫∑t Vuex DevTools extension</p>
            <p>‚Ä¢ Ki·ªÉm tra state c·ªßa order, payment, cart modules</p>
            <p>‚Ä¢ Xem mutations v√† actions ƒë∆∞·ª£c g·ªçi</p>
        </div>
        
        <div class="test-step">
            <h3>Console Logs</h3>
            <div class="code-block">
// Th√™m v√†o OrderComplete.vue ƒë·ªÉ debug:
console.log('Current Order:', this.currentOrder)
console.log('Current Payment:', this.currentPayment)
console.log('Cart Total:', this.cartTotal)
console.log('Final Order Total:', this.orderTotal)
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2 class="test-title">üìù Ghi ch√∫</h2>
        
        <div class="test-step">
            <p class="info">‚Ä¢ Lu·ªìng m·ªõi ƒë·∫£m b·∫£o gi√° ti·ªÅn ƒë∆∞·ª£c truy·ªÅn ch√≠nh x√°c t·ª´ Checkout sang OrderComplete</p>
            <p class="info">‚Ä¢ C√≥ fallback logic ƒë·ªÉ x·ª≠ l√Ω c√°c tr∆∞·ªùng h·ª£p edge case</p>
            <p class="info">‚Ä¢ Th√¥ng tin ƒë∆°n h√†ng ƒë∆∞·ª£c l∆∞u trong store ƒë·ªÉ c√≥ th·ªÉ s·ª≠ d·ª•ng l·∫°i</p>
            <p class="info">‚Ä¢ Console logs gi√∫p debug v√† theo d√µi lu·ªìng d·ªØ li·ªáu</p>
        </div>
    </div>
    
    <script>
        // Simple test functions
        function testOrderFlow() {
            console.log('üß™ Testing Order Flow...')
            
            // Simulate order data
            const mockOrderData = {
                orderNumber: 'GD' + Date.now().toString().slice(-8),
                orderTotal: 1500000,
                shippingFee: 50000,
                finalTotal: 1550000,
                paymentMethod: 'Thanh to√°n khi nh·∫≠n h√†ng (COD)',
                customerInfo: {
                    firstName: 'Nguy·ªÖn',
                    lastName: 'VƒÉn A',
                    email: 'test@example.com'
                }
            }
            
            console.log('üì¶ Mock Order Data:', mockOrderData)
            console.log('‚úÖ Order flow test completed!')
        }
        
        // Run test on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Order Flow Test Page Loaded')
            console.log('üìã Ready to test the updated order flow')
        })
    </script>
</body>
</html>